<% if transport_request.quote %>
  <div class="bg-white shadow rounded-lg p-6 mb-6">
    <div class="flex justify-between items-start mb-4">
      <h3 class="text-xl font-bold text-gray-900"><%= t('quotes.title') %></h3>
      <span class="px-3 py-1 rounded-full text-sm font-semibold <%= transport_request.quote.status_badge_class %>">
        <%= t("quotes.status.#{transport_request.quote.status}") %>
      </span>
    </div>

    <% if transport_request.quote.pending? %>
      <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
        <p class="text-sm text-blue-700">
          <%= t('quotes.messages.review_quote') %>
        </p>
      </div>
    <% end %>

    <!-- Quote Breakdown -->
    <div class="border-t border-b border-gray-200 py-4 mb-4">
      <h4 class="font-semibold text-gray-700 mb-3"><%= t('quotes.breakdown') %></h4>

      <div class="space-y-2">
        <% transport_request.quote.quote_line_items.each do |item| %>
          <div class="flex justify-between items-start">
            <div class="flex-1">
              <p class="text-gray-900"><%= item.description %></p>
              <% if item.calculation.present? %>
                <p class="text-sm text-gray-500"><%= item.calculation %></p>
              <% end %>
            </div>
            <p class="font-medium text-gray-900 ml-4">
              <%= number_to_currency(item.amount, unit: "€", separator: ",", delimiter: ".") %>
            </p>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Total -->
    <div class="flex justify-between items-center mb-6">
      <span class="text-xl font-bold text-gray-900"><%= t('quotes.line_items.total') %></span>
      <span class="text-2xl font-bold text-green-600">
        <%= number_to_currency(transport_request.quote.total_price, unit: "€", separator: ",", delimiter: ".") %>
      </span>
    </div>

    <!-- Actions -->
    <% if transport_request.quote.pending? %>
      <div class="flex space-x-3">
        <%= button_to t('quotes.actions.accept'),
            accept_customer_transport_request_quote_path(transport_request),
            method: :post,
            class: "flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-center",
            data: { turbo_confirm: t('quotes.messages.accept_to_continue') } %>

        <%= button_to t('quotes.actions.decline'),
            decline_customer_transport_request_quote_path(transport_request),
            method: :post,
            class: "px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold",
            data: { turbo_confirm: t('common.confirm') } %>
      </div>
    <% elsif transport_request.quote.accepted? %>
      <div class="bg-green-50 border-l-4 border-green-400 p-4">
        <p class="text-sm text-green-700">
          <%= t('quotes.messages.quote_accepted') %>
        </p>
      </div>
    <% elsif transport_request.quote.declined? %>
      <div class="bg-red-50 border-l-4 border-red-400 p-4">
        <p class="text-sm text-red-700">
          <%= t('quotes.messages.quote_declined') %>
        </p>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
    <p class="text-sm text-yellow-700">
      <%= t('quotes.messages.no_quote') %>
    </p>
  </div>
<% end %>
